<div class="container">
    <form id="controlData">
        <div class="form-group row">
            <label for="DevId" class="col-sm-2 col-form-label">Astronaut</label>
            <div class="col-sm-10">
                <select class="form-control" name="DevId" id="DevId" data-bind="options: fm.data(),value:'vm.activeElement().formData().DevId',optionsText: 'DevName',optionsValue: 'DevId'"></select>
            </div>
            <input type="hidden" name="DevName" id="DevName" bind="value:vm.activeElement().formData().DevName">
        </div>
    </form>
</div>
<script>
    var typeId = farmGraphModule.elements.elementModal.selector.data('type');

farmGraphModule.farmDb.GetNodeItems(typeId, function (response) {
    if (response == null) return;
    fm = new formNodeModel();
    fm.data(response)
    ko.applyBindings(formNodeModel, document.getElementById('controlData'));
})


var devEl = $fg('#NodeId');
fm.newNodeId(devEl.find('option:selected').val());

devEl.change(function (e) {
    var text = $fg(this).find('option:selected').text();
    fm.newNodeId($fg(this).find('option:selected').val());
    $fg('#NodeName').val(text);
})
</script>